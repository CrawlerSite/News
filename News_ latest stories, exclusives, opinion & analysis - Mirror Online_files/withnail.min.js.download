!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("extend"),e=function(){function a(a){var b=a.split("."),c=0,d=e;for(c;c<b.length;c++)d=d[b[c]];return d}function b(a){d(e,a)}function c(){return e}var e={breakpointType:null,modsForInit:{},modules:{},modulesToIgnore:[],overlayActive:!1,resize:{active:!1,debounceTimer:200,interval:null},scroll:{active:!1,debounceTimer:50,interval:null},tapOrClickEvent:"click",throttleDateTime:null,timings:{debounce:250},windowHeight:document.documentElement.clientHeight,windowTopOffset:null,windowWidth:document.documentElement.clientWidth};return e.breakpoints=[{name:"baseLayout",width:-1},{name:"tabletPortraitUpwards",width:728},{name:"tabletLandscapeUpwards",width:1024},{name:"desktop",width:1240}],{getOption:a,inspect:c,setOption:b}}();b.exports=e},{extend:11}],2:[function(a,b,c){var d=a("../../../src/js/events.js");b.exports=function(){function a(){var a=m(),c="object"==typeof a;c&&a.hasOwnProperty("log")&&b()}function b(){var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",window.TMCONFIG.frontendRoot+"/marwood/TM/scss/log.css"),document.querySelector("head").appendChild(a);var b=document.querySelector("BODY"),c="";c+='<div class="inner">',c+="  <h4>Event log</h4>",c+='  <a data-resize="maximize" href="#">Maximize</a>',c+='  <a class="active" data-resize="minimize" href="#">Minimize</a>',c+='  <a data-reset="" href="#">Reset</a>',c+='  <form action="" method="">',c+="    <fieldset>",c+="      <ul>",c+="        <li>",c+='          <label class="filter-information" for="log-information"></label>',c+="          <strong>0</strong>",c+='          <input id="log-information" type="checkbox" checked="checked">',c+="        </li>",c+="        <li>",c+='          <label class="filter-warning" for="log-warning"></label>',c+="          <strong>0</strong>",c+='          <input id="log-warning" type="checkbox" checked="checked">',c+="        </li>",c+="        <li>",c+='          <label class="filter-error" for="log-error"></label>',c+="          <strong>0</strong>",c+='          <input type="checkbox" checked="checked" id="log-error">',c+="        </li>",c+="        <li>",c+='          <label class="filter-override" for="log-override"></label>',c+="          <strong>0</strong>",c+='          <input id="log-override" type="checkbox" checked="checked">',c+="        </li>",c+="      </ul>",c+="    </fieldset>",c+="  </form>",c+="</div>",c+="<ol></ol>";var d=document.createElement("div");if(d.setAttribute("id","log"),d.setAttribute("class","minimize show-information show-warning show-error show-override"),d.innerHTML=c,b.appendChild(d),n.showViewportDimensions){var e=document.createElement("p");e.setAttribute("id","viewport-dimensions"),b.appendChild(e),e.innerHTML=window.innerWidth+"px",window.addEventListener("resize",function(){e.innerHTML=window.innerWidth+"px"})}h("[log.create]"),n.enabled=!0,f()}function c(a){d.delegate(a,"INPUT","click",function(b){var c=this.getAttribute("id").replace("log-",""),d=a.classList.contains("show-"+c)?"visible":"hidden";switch(d){case"visible":a.classList.remove("show-"+c);break;case"hidden":a.classList.add("show-"+c)}})}function e(a){var b=a.querySelector("OL");d.delegate(a,"A[data-resize]","click",function(c){c.preventDefault();var d=this.getAttribute("data-resize");a.classList.remove("minimize"),a.classList.remove("maximize"),a.classList.add(d),b.style.height=n.heights[d],l({message:"[log.eventsInit]: "+d+"d",type:"information"})})}function f(){var a=document.getElementById("log");l({message:"[log.eventsInit]",type:"information"}),c(a),d.delegate(document.getElementById("log"),"A[data-reset]","click",function(a){a.preventDefault(),g()}),e(a)}function g(){var a=document.querySelector("#log OL");a.innerHTML="",a.parentNode.setAttribute("class","minimize show-information show-warning show-error");var b,c=document.querySelectorAll("#log FORM STRONG");for(b=0;b<c.length;b++)c[b].innerHTML="0",c[b].nextElementSibling.setAttribute("checked",!0);l({message:"[log.emptyLog]: debug logger emptied",type:"information"})}function h(a){l({message:a,type:"information"})}function i(a){l({message:a,type:"warning"})}function j(a){l({message:a,type:"error"})}function k(a){l({message:a,type:"override"})}function l(a){if(document.getElementById("log")){var b=document.querySelectorAll("#log OL LI").length,c=document.createElement("LI"),d=document.querySelector("#log OL LI"),e=document.createElement("STRONG");c.setAttribute("class","log-"+a.type),c.innerHTML=b+1+". "+a.message,e.innerHTML=a.type+"&nbsp;",c.appendChild(e),document.querySelector("#log OL").insertBefore(c,d);var f=document.getElementById("log-"+a.type).previousElementSibling,g=f.innerHTML;g++,f.innerHTML=g}}function m(){if(location.search){var a={};try{var b=location.search.replace("?","").split("&");b.forEach(function(b){var c=b.split("=");a[c[0]]=c[1]})}catch(c){j("[log.parseQueryString]: error parsing querystring, description="+c.description)}return a}}var n={enabled:!1,heights:{maximize:"500px",minimize:"250px"},showViewportDimensions:!0};return{emptyLog:g,error:j,information:h,init:a,options:n,override:k,warning:i}}()},{"../../../src/js/events.js":5}],3:[function(a,b,c){b.exports={component:a("./component.js"),config:a("../../config/src/js/config.js"),events:a("./events.js"),log:a("../../log/src/js/log.js")}},{"../../config/src/js/config.js":1,"../../log/src/js/log.js":2,"./component.js":4,"./events.js":5}],4:[function(a,b,c){function d(a){f.fire(a,"component.activate")}function e(a){function b(b){a.init&&a.init(b),b.setAttribute("data-init",!0)}return a=a||{},{init:b}}var f=a("./events.js");b.exports={create:e,activate:d}},{"./events.js":5}],5:[function(a,b,c){b.exports=function(){function a(a){return[].slice.call(a)}function b(a,b,c,d){if(d=d||{},a.addEventListener(b,c),a.dataEvents){var e=a.dataEvents[b];if(e)if(d.purgeEventData)for(;e.length>0;)c.call(a,{data:e.shift(),target:a});else e.forEach(function(b){c.call(a,{data:b,target:a})})}}function c(a,b,c){a.dataEvents=a.dataEvents||{},a.dataEvents[b]=a.dataEvents[b]||[],a.dataEvents[b].push(c)}function d(){"complete"===document.readyState||"loaded"===document.readyState?(c(document,g),c(window,"load")):"interactive"===document.readyState&&c(document,g)}function e(a,b,d){var e;d=d||{},document.createEvent?(e=document.createEvent("HTMLEvents"),e.initEvent(b,!0,!0),e.data=d,a.dispatchEvent(e)):document.createEventObject&&(e=document.createEventObject(),e.data=d,a.fireEvent("on"+b,e)),c(a,b,d)}function f(a){d(),document.addEventListener?b(document,g,a):b(window,"load",a)}var g="DOMContentLoaded",h=function(){function b(a,c,d,e,f,g){if(c===d)return void(g.stopPropagation&&a.stopPropagation());var h=e.indexOf(c);h!==-1&&(f.call(e[h],a),g.preventDefault&&a.preventDefault()),b(a,c.parentNode,d,e,f,g)}function c(b,c,d){return b.concat(a(c.querySelectorAll(d)))}function d(b,c,d){var e=a(c.querySelectorAll(d.substr(1)));return e=e.filter(function(a){return a.parentNode===c}),b.concat(e)}function e(e,f,g,h,i){i=i||{},f=f.split(","),"undefined"==typeof e.length&&(e=[e]),e.forEach||(e=a(e)),e.forEach(function(a){a.addEventListener(g,function(e){var g=[];f.forEach(function(b){g=">"===b.substr(0,1)?d(g,a,b):c(g,a,b)}),b(e,e.target,a,g,h,i)})})}return e}();return{delegate:h,domReady:f,fire:e,listen:b}}()},{}],6:[function(a,b,c){function d(a,b){function c(a,b){n||(p=!!b,n=a,o=m(),o&&e.information("[localStorage] initialized with key: ["+n+"]"))}function d(a,b){var c;if(o&&n){if("string"!=typeof a)return void e.error("[localStorage] key has to be a string");if(c=l()||{},c[a]=b,p)try{q.setItem(n,f.encrypt(JSON.stringify(c),r))}catch(d){e.warning("[localStorage] can't setItem "+d)}else try{q.setItem(n,JSON.stringify(c))}catch(d){e.warning("[localStorage] can't setItem "+d)}}}function g(a){var b,c=null;if(o&&n){b=l();try{c=JSON.parse(b[a])}catch(d){b&&(c=b[a])}return c}}function h(a){var b;if(o&&n){b=l();try{delete b[a],q.setItem(n,JSON.stringify(b))}catch(c){e.warning("Can't delete item:["+a+"] "+c)}}}function i(){var a;if(o&&n)return a=q.getItem(n),p&&(a=f.decrypt(a,r)),a}function j(a){o&&n&&(p&&(a=f.encrypt(a,r)),q.setItem(n,a))}function k(){o&&n&&(q.removeItem(n),n=null)}function l(){var a;if(o&&n){if(a=q.getItem(n),p&&a)try{a=f.decrypt(a,r)}catch(c){e.warning("[localStorage] can't decrypt data "+c),a=""}try{a=JSON.parse(a)}catch(c){e.warning("[localStorage] can't parse data (getData) "+c),a=b.expectObject?{}:null}return a}}function m(){var a="test";if("undefined"==typeof q)return!1;try{return q.setItem(a,a),q.removeItem(a),!0}catch(b){return!1}}var n,o,p,q=window.localStorage,r="window.onresize";return b=b||{},c(a,b.encrypted),{deleteItem:h,destroy:k,getItem:g,getRawData:i,setItem:d,setRawData:j}}var e=a("chameleon-core/log"),f=a("../lib/tea.js");b.exports=d},{"../lib/tea.js":8,"chameleon-core/log":2}],7:[function(a,b,c){var d=a("chameleon-core/config"),e=a("chameleon-core/log"),f=a("promise-polyfill"),g=a("./localstore.js");b.exports=function(){function a(a){var b,c=[],d=a.length;for(b=0;b<d;b++)c[b]=a[b];return c}function b(a){var b=0,c=0,d=null;for(b=a.length-1;b>0;b--)c=Math.floor(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d;return a}function c(a){a=a||window.innerWidth;var b,c=d.getOption("breakpoints"),e=c.length;for(b=0;b<e;b++)if(a<c[b].width)return c[b-1].name;return c[e-1].name}function h(a){return a.match(/mod-(\S+)/g)[0]}function i(a){return h(a).replace("mod-","")}function j(){return{left:(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),top:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}}function k(){return(new Date).getTime().toString()+Math.random().toString().replace(".","-")}function l(a,b,c){if(!a||!b)return void e.error("[utilities.xhr]: missing required pramaeters");c=c||{};try{var d=new XMLHttpRequest;d.open(c.method||"get",a,!c.sync),c.headers&&Object.keys(c.headers).forEach(function(a){d.setRequestHeader(a,c.headers[a])}),d.send(c.data||null),d.onload=function(){4===d.readyState&&(200===d.status?b(d):c.errorCallback&&c.errorCallback(d))}}catch(f){e.information("[utilities.ajax]: error retrieving "+a+", description="+f.description)}}function m(a,b){return new f(function(c,d){if(!a)return e.error("[xhr]: missing required parameters"),void d("missing required parameters");b=b||{};try{var f=new XMLHttpRequest;f.open(b.method||"get",a,!b.sync),b.headers&&Object.keys(b.headers).forEach(function(a){f.setRequestHeader(a,b.headers[a])}),f.send(b.data||null),f.onload=function(){4===f.readyState&&200===f.status?c(f):d(f)}}catch(g){e.information("[ajax]: error retrieving "+a+", description="+g.description),d(g)}})}function n(a,b,c){var d="jsonp"+Math.round(1000001*Math.random());a=a||"",b=b||"",c=c||function(){},"function"==typeof b&&(c=b,b="callback"),window[d]=function(a){c(a),delete window[d]},a+=a.indexOf("?")===-1?"?":"&";var e=document.createElement("script");e.setAttribute("src",a+b+"="+d),document.getElementsByTagName("head")[0].appendChild(e)}function o(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function p(a,b){return a.matches?a.matches(b):a.msMatchesSelector?a.msMatchesSelector(b):!!a.webkitMatchesSelector&&a.webkitMatchesSelector(b)}function q(a,b){for(;!p(a,b);){if(!a.parentNode)return null;a=a.parentNode}return a}function r(a){for(var b=0;null!==(a=a.previousSibling);)1===a.nodeType&&b++;return b}function s(a){if(a){var b,c,d=a.querySelectorAll("script"),e=d.length;for(b=0;b<e;b++)c=document.createElement("script"),d[b].hasAttribute("src")?c.setAttribute("src",d[b].src):c.innerText=d[b].innerText,d[b].parentNode.replaceChild(c,d[b])}}function t(a){return(a=(document.cookie+";").match(new RegExp(a+"=.*;")))&&a[0].split(/=|;/)[1]}return{ajax:l,ajaxPromise:m,debounce:o,findAncestor:q,getBreakpoint:c,getCookie:t,getElementIndex:r,getModClass:h,getModType:i,jsonp:n,log:e,matches:p,nodeListToArray:a,processScripts:s,shuffleArray:b,uid:k,windowOffsets:j,stringify:function(){return""},promise:f,LocalStore:g}}()},{"./localstore.js":6,"chameleon-core/config":1,"chameleon-core/log":2,"promise-polyfill":15}],8:[function(a,b,c){(function(a){"use strict";var c={};c.encrypt=function(a,b){if(a=String(a),b=String(b),0==a.length)return"";var d=c.strToLongs(a.utf8Encode()),e=c.strToLongs(b.utf8Encode().slice(0,16));d.length;d=c.encode(d,e);var f=c.longsToStr(d);return f.base64Encode()},c.decrypt=function(a,b){if(a=String(a),b=String(b),0==a.length)return"";var d=c.strToLongs(a.base64Decode()),e=c.strToLongs(b.utf8Encode().slice(0,16));d.length;d=c.decode(d,e);var f=c.longsToStr(d);return f=f.replace(/\0+$/,""),f.utf8Decode()},c.encode=function(a,b){a.length<2&&(a[1]=0);for(var c,d,e=a.length,f=a[e-1],g=a[0],h=2654435769,i=Math.floor(6+52/e),j=0;i-- >0;){j+=h,d=j>>>2&3;for(var k=0;k<e;k++)g=a[(k+1)%e],c=(f>>>5^g<<2)+(g>>>3^f<<4)^(j^g)+(b[3&k^d]^f),f=a[k]+=c}return a},c.decode=function(a,b){for(var c,d,e=a.length,f=a[e-1],g=a[0],h=2654435769,i=Math.floor(6+52/e),j=i*h;0!=j;){d=j>>>2&3;for(var k=e-1;k>=0;k--)f=a[k>0?k-1:e-1],c=(f>>>5^g<<2)+(g>>>3^f<<4)^(j^g)+(b[3&k^d]^f),g=a[k]-=c;j-=h}return a},c.strToLongs=function(a){for(var b=new Array(Math.ceil(a.length/4)),c=0;c<b.length;c++)b[c]=a.charCodeAt(4*c)+(a.charCodeAt(4*c+1)<<8)+(a.charCodeAt(4*c+2)<<16)+(a.charCodeAt(4*c+3)<<24);return b},c.longsToStr=function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(255&a[c],a[c]>>>8&255,a[c]>>>16&255,a[c]>>>24&255);return b.join("")},"undefined"==typeof String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),"undefined"==typeof String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(a){return this}}),"undefined"==typeof String.prototype.base64Encode&&(String.prototype.base64Encode=function(){if("undefined"!=typeof btoa)return btoa(this);if("undefined"!=typeof a)return new a(this,"utf8").toString("base64");throw new Error("No Base64 Encode")}),"undefined"==typeof String.prototype.base64Decode&&(String.prototype.base64Decode=function(){if("undefined"!=typeof atob)return atob(this);if("undefined"!=typeof a)return new a(this,"base64").toString("utf8");throw new Error("No Base64 Decode")}),b.exports=c}).call(this,a("buffer").Buffer)},{buffer:10}],9:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h,i=a.length;g=d(a),h=new l(3*i/4-g),e=g>0?i-4:i;var j=0;for(b=0,c=0;b<e;b+=4,c+=3)f=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],h[j++]=f>>16&255,h[j++]=f>>8&255,h[j++]=255&f;return 2===g?(f=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,h[j++]=255&f):1===g&&(f=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,h[j++]=f>>8&255,h[j++]=255&f),h}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;i<k;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;n<o;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],10:[function(a,b,c){(function(b){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(b){return!1}}function e(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a,b){if(e()<b)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=g.prototype):(null===a&&(a=new g(b)),a.length=b),a}function g(a,b,c){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return k(this,a)}return h(this,a,b,c)}function h(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?n(a,b,c,d):"string"==typeof b?l(a,b,c):o(a,b)}function i(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function j(a,b,c,d){return i(b),b<=0?f(a,b):void 0!==c?"string"==typeof d?f(a,b).fill(c,d):f(a,b).fill(c):f(a,b)}function k(a,b){if(i(b),a=f(a,b<0?0:0|p(b)),!g.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function l(a,b,c){if("string"==typeof c&&""!==c||(c="utf8"),!g.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|r(b,c);a=f(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function m(a,b){var c=b.length<0?0:0|p(b.length);a=f(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function n(a,b,c,d){if(b.byteLength,c<0||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),g.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=g.prototype):a=m(a,b),a}function o(a,b){if(g.isBuffer(b)){var c=0|p(b.length);return a=f(a,c),0===a.length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||Y(b.length)?f(a,0):m(a,b);if("Buffer"===b.type&&_(b.data))return m(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function q(a){return+a!=a&&(a=0),g.alloc(+a)}function r(a,b){if(g.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return T(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return W(a).length;default:if(d)return T(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b=255&b,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===i)return k*g}else k!==-1&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return X(T(b,a.length-c),a,c,d)}function y(a,b,c,d){return X(U(b),a,c,d)}function z(a,b,c,d){return y(a,b,c,d)}function A(a,b,c,d){return X(W(b),a,c,d)}function B(a,b,c,d){return X(V(b,a.length-c),a,c,d)}function C(a,b,c){return 0===b&&c===a.length?Z.fromByteArray(a):Z.fromByteArray(a.slice(b,c))}function D(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return E(d)}function E(a){var b=a.length;if(b<=aa)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=aa));return c}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=S(a[f]);return e}function I(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function J(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function L(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function M(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function N(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function O(a,b,c,d,e){return e||N(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(a,b,c,d,23,4),c+4}function P(a,b,c,d,e){return e||N(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(a,b,c,d,52,8),c+8}function Q(a){if(a=R(a).replace(ba,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function R(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return a<16?"0"+a.toString(16):a.toString(16)}function T(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function U(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function V(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function W(a){return Z.toByteArray(Q(a))}function X(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Y(a){return a!==a}var Z=a("base64-js"),$=a("ieee754"),_=a("isarray");c.Buffer=g,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,g.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),c.kMaxLength=e(),g.poolSize=8192,g._augment=function(a){return a.__proto__=g.prototype,a},g.from=function(a,b,c){return h(null,a,b,c)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0})),g.alloc=function(a,b,c){return j(null,a,b,c)},g.allocUnsafe=function(a){return k(null,a)},g.allocUnsafeSlow=function(a){return k(null,a)},g.isBuffer=function(a){return!(null==a||!a._isBuffer)},g.compare=function(a,b){if(!g.isBuffer(a)||!g.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},g.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(a,b){if(!_(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(!g.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},g.byteLength=r,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)t(this,b,b+1);return this},g.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},g.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},g.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?D(this,0,a):s.apply(this,arguments)},g.prototype.equals=function(a){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},g.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},g.prototype.compare=function(a,b,c,d,e){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],h=k[l];break}return f<h?-1:h<f?1:0},g.prototype.includes=function(a,b,c){return this.indexOf(a,b,c)!==-1},g.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},g.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},g.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":return y(this,a,b,c);case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var aa=4096;g.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d;if(g.TYPED_ARRAY_SUPPORT)d=this.subarray(a,b),d.__proto__=g.prototype;else{var e=b-a;d=new g(e,(void 0));for(var f=0;f<e;++f)d[f]=this[f+a]}return d},g.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},g.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},g.prototype.readUInt8=function(a,b){return b||J(a,1,this.length),this[a]},g.prototype.readUInt16LE=function(a,b){return b||J(a,2,this.length),this[a]|this[a+1]<<8},g.prototype.readUInt16BE=function(a,b){return b||J(a,2,this.length),this[a]<<8|this[a+1]},g.prototype.readUInt32LE=function(a,b){return b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},g.prototype.readUInt32BE=function(a,b){return b||J(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},g.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},g.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},g.prototype.readInt8=function(a,b){return b||J(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},g.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt32LE=function(a,b){return b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},g.prototype.readInt32BE=function(a,b){return b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},g.prototype.readFloatLE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!0,23,4)},g.prototype.readFloatBE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!1,23,4)},g.prototype.readDoubleLE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!0,52,8)},g.prototype.readDoubleBE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!1,52,8)},g.prototype.writeUIntLE=function(a,b,c,d){
if(a=+a,b=0|b,c=0|c,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},g.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b=0|b,c=0|c,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},g.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,1,255,0),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},g.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):M(this,a,b,!0),b+4},g.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,1,127,-128),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},g.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):M(this,a,b,!0),b+4},g.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeFloatLE=function(a,b,c){return O(this,a,b,!0,c)},g.prototype.writeFloatBE=function(a,b,c){return O(this,a,b,!1,c)},g.prototype.writeDoubleLE=function(a,b,c){return P(this,a,b,!0,c)},g.prototype.writeDoubleBE=function(a,b,c){return P(this,a,b,!1,c)},g.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(f<1e3||!g.TYPED_ARRAY_SUPPORT)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},g.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);e<256&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a=255&a);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var f;if("number"==typeof a)for(f=b;f<c;++f)this[f]=a;else{var h=g.isBuffer(a)?a:T(new g(a,d).toString()),i=h.length;for(f=0;f<c-b;++f)this[f+b]=h[f%i]}return this};var ba=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":9,ieee754:12,isarray:13}],11:[function(a,b,c){"use strict";var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===e.call(a)},g=function(a){if(!a||"[object Object]"!==e.call(a))return!1;var b=d.call(a,"constructor"),c=a.constructor&&a.constructor.prototype&&d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!c)return!1;var f;for(f in a);return"undefined"==typeof f||d.call(a,f)};b.exports=function h(){var a,b,c,d,e,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||null==j)&&(j={});k<l;++k)if(a=arguments[k],null!=a)for(b in a)c=j[b],d=a[b],j!==d&&(m&&d&&(g(d)||(e=f(d)))?(e?(e=!1,i=c&&f(c)?c:[]):i=c&&g(c)?c:{},j[b]=h(m,i,d)):"undefined"!=typeof d&&(j[b]=d));return j}},{}],12:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],13:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],14:[function(a,b,c){"use strict";function d(a,b){if(a&&"object"==typeof a){if("string"==typeof b&&""!==b){var c=b.split(".");return c.reduce(function(a,b){return a&&a[b]},a)}return"number"==typeof b?a[b]:a}return a}function e(a,b,c){if(c=c||{},a&&"object"==typeof a){if("string"==typeof b&&""!==b){var d=b.split(".");return d.reduce(function(a,b,d,e){return d==e.length-1?c.own?!(!a||!a.hasOwnProperty(b)):!!(null!==a&&"object"==typeof a&&b in a):a&&a[b]},a)}return"number"==typeof b&&b in a}return!1}function f(a,b,c){if(a&&"object"==typeof a){if("string"==typeof b&&""!==b){var d=b.split(".");return d.reduce(function(a,b,e){return a[b]=a[b]||{},d.length==e+1&&(a[b]=c),a[b]},a)}return"number"==typeof b?(a[b]=c,a[b]):a}return a}function g(a,b,c,d){if(d=d||{},a&&"object"==typeof a){if("string"==typeof b&&""!==b){var e,f=b.split("."),g=!1;return e=!!f.reduce(function(a,b){return g=g||a===c||!!a&&a[b]===c,a&&a[b]},a),d.validPath?g&&e:g}return!1}return!1}b.exports={set:f,get:d,has:e,hasOwn:function(a,b,c){return this.has(a,b,c||{own:!0})},isIn:g}},{}],15:[function(a,b,c){!function(a){function c(){}function d(a,b){return function(){a.apply(b,arguments)}}function e(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],k(a,this)}function f(a,b){for(;3===a._state;)a=a._value;return 0===a._state?void a._deferreds.push(b):(a._handled=!0,void m(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)return void(1===a._state?g:h)(b.promise,a._value);var d;try{d=c(a._value)}catch(e){return void h(b.promise,e)}g(b.promise,d)}))}function g(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var c=b.then;if(b instanceof e)return a._state=3,a._value=b,void i(a);if("function"==typeof c)return void k(d(c,b),a)}a._state=1,a._value=b,i(a)}catch(f){h(a,f)}}function h(a,b){a._state=2,a._value=b,i(a)}function i(a){2===a._state&&0===a._deferreds.length&&m(function(){a._handled||n(a._value)});for(var b=0,c=a._deferreds.length;b<c;b++)f(a,a._deferreds[b]);a._deferreds=null}function j(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function k(a,b){var c=!1;try{a(function(a){c||(c=!0,g(b,a))},function(a){c||(c=!0,h(b,a))})}catch(d){if(c)return;c=!0,h(b,d)}}var l=setTimeout,m="function"==typeof setImmediate&&setImmediate||function(a){l(a,0)},n=function(a){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){var d=new this.constructor(c);return f(this,new j(a,b,d)),d},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},e.resolve=function(a){return a&&"object"==typeof a&&a.constructor===e?a:new e(function(b){b(a)})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})},e._setImmediateFn=function(a){m=a},e._setUnhandledRejectionFn=function(a){n=a},"undefined"!=typeof b&&b.exports?b.exports=e:a.Promise||(a.Promise=e)}(this)},{}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../scriptsCore/js/adUtilities"),f=d(e),g=a("../../scriptsCore/js/configUtilities"),h=d(g),i=a("@trinitymirrordigital/chameleon-core"),j=d(i),k=a("../../scriptsCore/js/dataLayerUtilities"),l=d(k),m=a("../../scriptsCore/js/injection"),n=d(m),o=a("nested-property"),p=d(o),q=a("./sponsorshipBar"),r=d(q),s=a("../../TMAd/js/sticky"),t=d(s),u=a("../../headerBidding/js/switchConcepts"),v=d(u),w=a("@trinitymirrordigital/chameleon-utilities"),x=d(w),y=a("./wraparound"),z=d(y),A=a("./wraparoundNew"),B=d(A),C=j["default"].events,D=j["default"].component,E=function(){function a(){return x["default"].nodeListToArray(document.body.querySelectorAll(".gpt"))}function b(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h["default"].getConfig(a),c=void 0;return b&&b.sizes&&!b.isOOP?(a.style.display="block",void(Array.isArray(b.sizes)&&(c=b.sizes.reduce(function(a,b){return Math.max(a,b[1])},0),b.sticky?(a.parentNode.style.height=c+"px",a.parentNode.style["max-height"]=c+"px"):(a.style.height=c+"px",a.style["max-height"]=c+"px")))):void(a.style.display="none")}function c(a){return(a||[]).slice(0).sort(f["default"].slotOrderComparator)}function d(a){var b=void 0,d=void 0,f=[];return c(a).forEach(function(a){d=h["default"].getConfig(a),d&&(b=e(a,d),b&&(f[a.id]={config:d,adEl:a,gptSlot:b}))}),f}function e(a,b){var c=void 0,d=void 0;if(c=b.isOOP===!0?ca.defineOutOfPageSlot(b.customAdUnitId||ga.adUnitId,a.id):ca.defineSlot(ga.adUnitId,b.sizes,a.id),!c)return void h["default"].log("[INFO] GPTSlot ("+a.id+") not registered.");h["default"].log("[INFO] GPTSlot ("+a.id+") registered. Sizes:",b.sizes);try{c.addService(ca.pubads())}catch(e){h["default"].log("[ERROR] calling addService on slot: "+e)}d=b.targeting||{},a.id&&(d.slotName=a.id),"auto"===d.index?(ha++,d.index=ha):ha=d.index;for(var f in d)d.hasOwnProperty(f)&&(c.setTargeting(f,d[f]),h["default"].log("[INFO] Setting slot targeting prop "+f+" to "+d[f]));return c.setTargeting("tile",d.index),h["default"].log("[INFO] Setting LW slot targeting prop tile to "+d.index),"y"===d.hivis&&(c.setTargeting("pos","top"),h["default"].log("[INFO] Setting LW slot targeting prop pos to top")),c}function g(a,b){if(b||(b=h["default"].getConfig(a)),b.sticky){var c=document.createElement("div");c.classList.add(b.additionalClass),c.appendChild(a),n["default"].insertPlaceholder(c,b),b.additionalClass&&n["default"].insertAdditionalClass(c,b.additionalClass)}}function i(){h["default"].log("[INFO] Ads re-injected."),document.body.removeEventListener("injection.complete.gpt",i);var a=j();fa=d(a),k(),h["default"].log("[INFO] Breakpoint change complete.")}function j(){var c=a();h["default"].log("[INFO] Before filtering in TMAd.js - prepareAdSlots(): ",c);var d=c.filter(f["default"].isPlaceholderEnabled);return h["default"].log("[INFO] After filtering in TMAd.js: - prepareAdSlots ",d),d.forEach(function(a){var c=h["default"].getConfig(a);g(a,c),b(a,c),l["default"].setMetric(a,"slotExpected",1),l["default"].setMetric(a,"slotRenderedError",1)}),d}function k(){var a=[],b=void 0;for(b in fa)fa.hasOwnProperty(b)&&(fa[b].config.lazyLoad||(ca.display(b),a.push(fa[b].gptSlot),fa[b].adEl.setAttribute("data-requested",l["default"].getPerformanceTime())));da().refresh(a)}function m(a,b,c,d){var e=a.querySelector("div"),f=a;d&&(f=a.parentNode),f.style.height=c+"px",f.style.maxHeight=c+"px",e.style.width=b+"px";var g=f.querySelector("iframe");g.width=b+"px",g.height=c+"px",g.maxHeight=c+"px"}function o(a,b,c){var d=void 0;return h["default"].log("[INFO] Checking stickiness ",a.name,a.sticky,b,c),a.sticky&&a.sticky.sizes&&(d=a.sticky.sizes.filter(function(d){if(h["default"].log("[INFO] Comparing sticky sizes",a.sticky,d,b,c),d[0]===b&&d[1]===c)return h["default"].log("[INFO] Found sticky size ",d,b,c),!0})),c>8&&a.sticky&&(d&&d.length>0||!a.sticky.sizes)}function q(){C.listen(document.body,"advert.unStick",A),C.listen(document.body,"advert.resize",y),C.listen(da(),"slotRenderEnded",E),C.listen(da(),"slotOnload",F),C.listen(da(),"slotVisibilityChanged",s),C.listen(window,"breakpointchange",u),C.listen(window,"wraparound.load",W),C.listen(window,"wraparoundNew.load",X),C.listen(window,"sponsorshipBar.load",Y),C.listen(window,"tm.passback",Z),C.listen(window,"creativeWrapper.load",$)}function s(a){var b=a.slot.getSlotElementId(),c=fa[b],d=c.adEl;d.getAttribute("data-viewable")||(a.inViewPercentage>=75?c.visibilityTimeout||(c.visibilityTimeout=setTimeout(function(){h["default"].log("[INFO] Advert",b,"has been registered as viewable."),d.setAttribute("data-viewable","true"),l["default"].updateViewability(d),l["default"].setMetric(d,"viewable",1)},3e3)):clearTimeout(c.visibilityTimeout))}function u(){h["default"].log("[INFO] Breakpoint changed. Reloading all ads."),ca.destroySlots(),w(fa),document.body.addEventListener("injection.complete.gpt",i),n["default"].injectAtCurrentBreakpointForType("gpt"),B["default"].reset(),C.fire(document.body,"reinjection.complete.gpt")}function w(a){Object.keys(a).forEach(function(b){a[b].config.referenceNode&&a[b].config.relativePos&&x["default"].nodeListToArray(document.body.querySelectorAll("#"+b)).forEach(function(c){a[b].config.sticky?c.parentNode.remove():c.remove()})})}function y(a){var b=a.target,c=a.advertData,d=h["default"].getConfig(b);b.setAttribute("data-resized","true"),m(b,c.sizeObj.width,c.sizeObj.height,d.sticky)}function A(a){var b=a.target,c=h["default"].getConfig(b);b.setAttribute("data-stick","false"),t["default"].unStick(b,c.sticky)}function E(a){var b=a.slot.getSlotElementId(),c=document.getElementById(b),d=h["default"].getConfig(c),e=a.size?a.size[1]||0:0,f=a.size?a.size[0]||0:0;a.slot.getAdUnitPath&&(a.adUnitPath=a.slot.getAdUnitPath());var g=a.isEmpty;h["default"].log("[INFO] Ad rendered event",b,a),l["default"].setCustomTimer(c,"slot-rendered"),l["default"].setMetric(c,"slotRendered",1),l["default"].setMetric(c,"slotRenderedError",-1),l["default"].setMetric(c,"slotEmpty",+g),g||(l["default"].setMetric(c,"creativeRenderedError",1),c.setAttribute("data-rendered-width",f),c.setAttribute("data-rendered-height",e)),"true"!==c.getAttribute("data-resized")&&(!g&&e?m(c,f,e,d.sticky):c.style.display="none"),delete a.slot,l["default"].setInfo("components.gpt.data."+b,a)}function F(a){var b=a.slot.getSlotElementId(),c=document.getElementById(b),d=h["default"].getConfig(c),e=parseInt(c.dataset.renderedHeight,10),f=parseInt(c.dataset.renderedWidth,10),g=_(b);h["default"].log("[INFO] Creative rendered event",a.slot.getSlotElementId(),a),a.isEmpty||(l["default"].setMetric(c,"creativeRendered",1),l["default"].setMetric(c,"creativeRenderedError",-1),d.adFreeEnabled&&aa(d.name)),g&&l["default"].setInfo("components.gpt.dfpInfo."+b+".inneriframes",g),l["default"].finaliseElementTiming(c),G(a),c.removeAttribute("data-gpt-placeholder"),"false"!==c.getAttribute("data-stick")&&o(d,f,e)&&(h["default"].log("[INFO] Ad is sticky",c),t["default"].makeSticky(c,d.sticky))}function G(a){var b=a.slot.getSlotElementId(),c=document.getElementById(b),d=a.slot.getResponseInformation(),e=c.dataset,f=parseInt(e.responseEnd),g=parseInt(e.requested),h=void 0;p["default"].get(window.commercialData,"info.consolidated.gpt.data")||l["default"].setInfo("consolidated.gpt.data",[]),h=p["default"].get(window.commercialData,"info.consolidated.gpt.data"),h.push({slotName:l["default"].toCamelCase(b),requestedToReceived:Math.round(f-g),advertiserId:d.advertiserId,campaignId:d.campaignId,creativeId:d.creativeId}),h.sort(function(a,b){return b.requestedToReceived-a.requestedToReceived})}function H(){for(var a in ga)ga.hasOwnProperty(a)&&"adUnitId"!==a&&(ea(a,ga[a]),h["default"].log("[INFO] Targeting page level data of "+a+" to "+ga[a]));ia&&(ea("commercialTestId",ia.id),h["default"].log("[INFO] Targeting page level data of commercialTestId to "+ia.id),ea("commercialTestValue",ia.value),h["default"].log("[INFO] Targeting page level data of commercialTestValue to "+ia.value),ea("commercialTestLazyloadOffset",ia.lazyloadOffset),h["default"].log("[INFO] Targeting page level data of commercialTestLazyloadOffset to "+ia.lazyloadOffset),ea("commercialTestSegmentationThreshold",ia.segmentationThreshold),h["default"].log("[INFO] Targeting page level data of commercialTestSegmentationThreshold to "+ia.segmentationThreshold))}function I(){var a=window.gs_channels;return a||h["default"].log("[ERROR] Grapeshot targeting param not found on page"),{loaded:a&&"default"!==a,value:a}}function J(){var a=p["default"].get(h["default"].getScriptConfig(),"grapeshot.enabled");if(!a)return void h["default"].log("[INFO] Grapeshot not enabled");var b=I();Object.keys(b).forEach(function(a){l["default"].setInfo("grapeshot."+a,b[a])}),h["default"].log("[INFO] Grapeshot enabled")}function K(a){h["default"].log("[INFO] WEBX-1507 Lazyloading ad "+a.id),a.setAttribute("data-requested",l["default"].getPerformanceTime()),da().refresh([fa[a.id].gptSlot])}function L(a){ca.display(a.id),K(a)}function M(a){var b=void 0;Object.keys(a).forEach(function(c){b=a[c],b.adEl.setAttribute("data-mod","gpt-sra"),b.config.isOOP&&b.adEl.setAttribute("data-immediate",!0)})}function N(a){return Object.keys(a).map(function(b){return a[b]}).sort(function(a,b){return f["default"].cmpSlotOop(a.config,b.config)||a.config.targeting.index-b.config.targeting.index})}function O(a,b){M(a),ca.display(N(a)[0].adEl.id);var c=D.create({init:K});c.offsets={top:b,bottom:b},C.fire(window,"component.register",{components:{"gpt-sra":c}})}function P(a){if(a=a.filter(function(a){return!a.adEl.getAttribute("data-init")}),h["default"].log("[INFO] WEBX-1507 remaining un-rendered ads: "+a.length),a.length){var b=a[0].adEl;setTimeout(function(){h["default"].log("[INFO] WEBX-1507 auto-rendering ad "+b.id+" after "+ia.timeout+"ms"),b.setAttribute("data-immediate",!0),C.fire(b.parentNode,"component.activate"),P(a)},ia.timeout)}}function Q(a){var b=a.getTargetingKeys();return b.reduce(function(b,c){return b[c]=a.getTargeting(c),b},{})}function R(a){return a?a.reduce(function(a,b){return a[b.getSlotElementId()]=Q(b),a},{}):{}}function S(a){var b=R(a().getSlots());h["default"].log("[INFO] slot targeting "+b);for(var c in b)b.hasOwnProperty(c)&&l["default"].setInfo("components.gpt.dfp-targeting."+c,isNaN(b[c])?b[c]:+b[c])}function T(a){var b=void 0,c=a.pubads;if(h["default"].log("[INFO] Showing Ads - time:",l["default"].getPerformanceTime()),ea=function(a,b){c().setTargeting(a,b)},H(),c().enableSingleRequest(),c().enableAsyncRendering(),c().collapseEmptyDivs(),c().setCentering(!0),c().enableVideoAds(),ia&&ia.value)switch(h["default"].log("[INFO] running commercial A/B test "+ia.id),c().disableInitialLoad(),a.enableServices(),ia.id){case"WEBX-1507-LAZY":O(fa,ia.lazyloadOffset);break;case"WEBX-1507-SEQUENCED":O(fa,0),P(N(fa));break;default:k()}else c().disableInitialLoad(),a.enableServices(),k();b=c().getTargeting("shield")+"",l["default"].setInfo("adRecovery.enabled","1"===b),S(c),C.fire(window,"component.register",{components:{gpt:D.create({init:L})}})}function U(a){return v["default"].init(a)}function V(a,b){var c=void 0;h["default"].log("[INFO] Setting up Ads - time:",l["default"].getPerformanceTime()),ca=a,da=ca.pubads,q(),ga=f["default"].getPageLevelData(),J(),fa=d(b),c=U(b),c?c.then(function(a){h["default"].log("[INFO] Header bid promise resolved",a),l["default"].setInfo("headerBidding.status","complete"),T(ca)},function(a){h["default"].log("[INFO] Header bid promise rejected",a),l["default"].setInfo("headerBidding.status","timeout"),T(ca)}):T(ca)}function W(a){z["default"].init(a.data)}function X(a){B["default"].init(a.data)}function Y(a){r["default"].init(a.data)}function Z(a){"inSkin"===a.data.type&&(h["default"].log("[INFO] inSkin PASSBACK: refreshing slot",fa["div-gpt-ad-top-slot"]),da().refresh([fa["div-gpt-ad-top-slot"].gptSlot]))}function $(a){l["default"].setInfo("components.gpt.dfpInfo."+a.data.slotName,a.data)}function _(a){var b=document.getElementById(a),c=b.querySelector("iframe"),d=void 0;try{d=c.contentDocument}catch(e){return}var f=d.querySelectorAll("iframe"),g=[];if(0!==f.length)return f.forEach(function(a,b){g.push({order:b,name:a.name,id:a.id,src:a.src})}),g}function aa(a){document.getElementById(a).insertAdjacentHTML("beforebegin",'<div class="wrapper-adv"></div>')}function ba(a){h["default"].log("[INFO] Initialising TMAd - time:",l["default"].getPerformanceTime()),ia=a;var b=j();window.googletag?window.googletag.cmd.push(function(){V(window.googletag,b)}):(window.$script("http://www.googletagservices.com/tag/js/gpt.js","adlibs"),window.$script.ready("adlibs",function(){window.googletag.cmd.push(function(){V(window.googletag,b)})}))}var ca=void 0,da=void 0,ea=void 0,fa={},ga=void 0,ha=0,ia=void 0;return{adRenderedListener:E,consolidateDimensionsAdPerformance:G,findInnerFrames:_,harvestAdvertSlots:a,init:ba,prepareAdSlots:j,registerSlot:e,setAdSize:b,unStickListener:A,removeSlotsFromDom:w}}();c["default"]=E},{"../../TMAd/js/sticky":18,"../../headerBidding/js/switchConcepts":22,"../../scriptsCore/js/adUtilities":24,"../../scriptsCore/js/configUtilities":27,"../../scriptsCore/js/dataLayerUtilities":28,"../../scriptsCore/js/injection":30,"./sponsorshipBar":17,"./wraparound":19,"./wraparoundNew":20,"@trinitymirrordigital/chameleon-core":3,"@trinitymirrordigital/chameleon-utilities":7,"nested-property":14}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../scriptsCore/js/configUtilities"),f=d(e),g=a("../../scriptsCore/js/injection"),h=d(g),i=a("../../../target/tmp/TMAd/jade/sponsorship-bar.pug"),j=d(i),k=function(){function a(a){return a?(f["default"].log("[INFO] Sponsorship Bar init called",a),void(d||c(b(a)))):void f["default"].log('[ERROR] The data coming from the "sponsorshipBar.load" event is incorrect. Data:',a)}function b(a){return(0,j["default"])({partner:a})}function c(a){var b=document.createElement("div");b.innerHTML=a,h["default"].insertAfterElem(document.getElementById("div-gpt-ad-sponsorship-bar"),b.firstChild),d=!0}var d;return{init:a,renderTemplate:b}}();c["default"]=k},{"../../../target/tmp/TMAd/jade/sponsorship-bar.pug":35,"../../scriptsCore/js/configUtilities":27,"../../scriptsCore/js/injection":30}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../scriptsCore/js/pageUtilities"),f=d(e),g=a("../../scriptsCore/js/configUtilities"),h=d(g),i=a("../../scriptsCore/js/dataLayerUtilities"),j=d(i),k=a("@trinitymirrordigital/chameleon-core"),l=d(k),m=l["default"].events,n=function(){function a(a,b){var d=b.mode,f=e[d],i=g[d];if("function"!=typeof f||"function"!=typeof i)return void h["default"].log("[ERROR] The advert",a,"cannot be stuck. StickMode functions invalid.");var j=f(a,d),k=function(){window.removeEventListener("scroll.start",j),window.removeEventListener("scroll.stop",j),i(a,d)};setTimeout(function(){"true"===a.getAttribute("data-viewable")?k():setTimeout(k,3e3)},c(b))}function b(a,b){var c=b.mode,d=g[c];d(a,c)}function c(a){var b=f["default"].getQueryParameter("stickyDuration");return b?parseInt(b):a.duration}var d="gpt-sticky",e=function(){function a(a,b){function c(){var c=(window.pageYOffset||document.scrollTop)-(document.clientTop||0);c>i?!f&&a.classList.contains(d+"-"+b)&&(f=!0,a.classList.add(d),e.classList.add("hide-menu"),j["default"].setMetric(a,"adStuck",1)):(f=!1,a.classList.remove(d),e.classList.remove("hide-menu"))}h["default"].log("[INFO] The advert",a,"has been stuck. Mode",b);var e=document.querySelector(".mod-header"),f=!1,g=a.getBoundingClientRect(),i=g.top;return a.classList.add(d+"-"+b),e.classList.add("animate-menu"),c(),m.listen(window,"scroll.start",c),m.listen(window,"scroll.stop",c),c}return{header:a}}(),g=function(){function a(a,b){h["default"].log("[INFO] The advert",a,"has been unstuck.");var c=document.querySelector(".mod-header");a.classList.remove(d),a.classList.remove(d+"-"+b),c.classList.remove("hide-menu"),c.classList.remove("animate-menu")}return{header:a}}();return{getStickyDuration:c,makeSticky:a,stickMode:e,unStick:b,unStickMode:g}}();c["default"]=n},{"../../scriptsCore/js/configUtilities":27,"../../scriptsCore/js/dataLayerUtilities":28,"../../scriptsCore/js/pageUtilities":31,"@trinitymirrordigital/chameleon-core":3}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../scriptsCore/js/injection"),f=d(e),g=a("../../scriptsCore/js/configUtilities"),h=d(g),i=a("@trinitymirrordigital/chameleon-core"),j=d(i),k=j["default"].events,l=function(){function a(a,b){var c,d,e=window.document.documentElement.clientWidth||window.innerWidth||0,f=(e-a.pageWidth)/2;f<130&&(f=130),b.left.style.width=f+"px",b.right.style.width=f+"px",c=document.getElementById("wallpaper-frame-left-click"),c.href=a.clickLeft?a.clicktrack+a.clickLeft:a.clicktrack+a.clickTop,d=document.getElementById("wallpaper-frame-right-click"),d.href=a.clickRight?a.clicktrack+a.clickRight:a.clicktrack+a.clickTop}function b(a,b){var c=document.createElement("div");c.classList.add("wallpaper-frame"),c.setAttribute("id","wallpaper-frame-"+a);var d=document.createElement("a");return d.classList.add("wallpaper-frame-inner"),d.setAttribute("id","wallpaper-frame-"+a+"-click"),d.setAttribute("href",b),d.setAttribute("target","_blank"),f["default"].appendChildElement(c,d),c}function c(a){var c={},d=document.createElement("div");d.setAttribute("id","gpt-wallpaper-container"),f["default"].insertPlaceholder(d,{referenceNode:"main",relativePos:"before"});var e=document.createElement("div");e.classList.add("wallpaper-viewport");for(var g in a)a.hasOwnProperty(g)&&(c[g]=f["default"].appendChildElement(e,b(g,a[g])));return f["default"].appendChildElement(d,e),c}function d(){var a=(window.pageYOffset||document.scrollTop)-(document.clientTop||0)||0;a>33?(document.body.style.backgroundAttachment="fixed",document.body.style.backgroundPosition="center 80px"):(document.body.style.backgroundAttachment="scroll",document.body.style.backgroundPosition="center 113px")}function e(b){if(!b||!b.frames)return void h["default"].log('[ERROR] The data coming from the "wraparound.load" event is incorrect. Data:',b);var e=document.querySelector("main");e?e.classList.add("wraparound"):h["default"].log("[ERROR] mainElement is not defined"),k.listen(window,"scroll.start",d),k.listen(window,"scroll.stop",d),h["default"].log("[INFO] wraparound init called",b);var f=c(b.frames);a(b.wallpaper,f)}return{createWallpaperWrapper:c,init:e}}();c["default"]=l},{"../../scriptsCore/js/configUtilities":27,"../../scriptsCore/js/injection":30,"@trinitymirrordigital/chameleon-core":3}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../scriptsCore/js/adUtilities"),f=d(e),g=a("../../scriptsCore/js/configUtilities"),h=d(g),i=a("@trinitymirrordigital/chameleon-core"),j=d(i),k=a("@trinitymirrordigital/chameleon-utilities"),l=d(k),m=j["default"].events,n=function(){function a(a){a.adObj&&(a.scrollTopCurrent>=a.lockAfterPixels?(a.adObj.classList.add("fixed"),a.adObj.style.top=a.lockAdsScrollPosition+"px"):(a.adObj.classList.remove("fixed"),a.adObj.style.top=""))}function b(b,c){var d=l["default"].getBreakpoint(),e=c?c.scrollTop:(window.pageYOffset||document.scrollTop)-(document.clientTop||0)||0,f=u.adsTopPositionToWindow.breakpoints[d],g=u.lockAdsScrollPosition.breakpoints[d],h=f-g,i=document.getElementById("wraparound-ad-left"),j=document.getElementById("wraparound-ad-right");i&&a({adObj:i,lockAdsScrollPosition:g,lockAfterPixels:h,scrollTopCurrent:e}),j&&a({adObj:j,lockAdsScrollPosition:g,lockAfterPixels:h,scrollTopCurrent:e})}function c(a,b){var c=document.querySelector("header"),e=document.createElement("div"),f=b||window.innerHeight;if(u.topFrame.isRichMedia=!!a.data.hasOwnProperty("isRichMedia")&&!!a.data.isRichMedia,h["default"].log("[INFO] Adding #wrapround-ad-"+a.position+" to the DOM"),u.topFrame.isRichMedia&&document.body.classList.add("wraparound-rich-media"),c)if(e.setAttribute("id","wraparound-ad-"+a.position),e.style.backgroundColor=a.data.backgroundHex,u.topFrame.isRichMedia)"top"!==a.position?c.parentNode.insertBefore(e,c.nextSibling):document.querySelector(".top-slot").style.backgroundColor=a.data.backgroundHex;else{e.style.backgroundImage='url("'+a.data.backgroundImage+'")';var g=document.createElement("a");g.setAttribute("href",a.data.clickUrl),g.setAttribute("target","_blank"),e.appendChild(g),c.parentNode.insertBefore(e,c.nextSibling),d(e,a,f)}}function d(a,b,c){var d=c||window.innerHeight;if("top"===b.position){if(!u.topFrame.isRichMedia){var e=void 0,f=void 0,g=void 0;a.hasAttribute("data-ratio")?g=parseFloat(a.getAttribute("data-ratio")):(e=b.data.height,f=u.topFrame.adFrameNativeWidth,g=(e/f*100).toFixed(2),a.setAttribute("data-ratio",g)),f=a.offsetWidth,e=Math.round(f/100*g),a.style.height=e+"px"}}else a.style.height=d+"px"}function e(){d(document.getElementById("wraparound-ad-top"),{position:"top"}),d(document.getElementById("wraparound-ad-left"),{position:"left"}),d(document.getElementById("wraparound-ad-right"),{position:"right"}),g()}function g(a){var b=document.querySelector(".wraparound-body > main");a=a||b.getAttribute("data-scale")||1;var c=document.getElementById("wraparound-ad-top");if(!u.topFrame.isRichMedia&&c){var d=c.offsetHeight,e=d+d*(1-a);document.querySelector("main").style.paddingTop=e+"px"}}function i(){document.body.classList.contains("wraparound-body")||document.body.classList.add("wraparound-body"),document.querySelector("main")&&document.querySelector("main").classList.add("wraparound")}function j(){document.body.style.backgroundColor="#ffffff"}function k(a){document.body.style.backgroundColor=a}function n(){h["default"].log("[INFO] Removing and re-initializing wraparound"),window.removeEventListener("resize.stop",b),window.removeEventListener("resize.stop",e),window.removeEventListener("scroll.stop",b),
window.removeEventListener("scroll.stop",e),window.removeEventListener("scroll.stop",s),window.removeEventListener("scroll.stop",p),j();var a=document.body;a.classList.remove("wraparound-body"),a.classList.remove("wraparound-rich-media"),a.style.removeProperty("background-color");var c=document.querySelector("main");c.classList.remove("wraparound"),c.style.removeProperty("padding-top");var d=document.getElementById("wraparound-ad-left"),f=document.getElementById("wraparound-ad-top"),g=document.getElementById("wraparound-ad-right");d&&(h["default"].log("[INFO] Removing #wrapround-ad-left from the DOM"),d.parentNode.removeChild(d)),f&&(h["default"].log("[INFO] Removing #wrapround-ad-top from the DOM"),f.parentNode.removeChild(f)),g&&(h["default"].log("[INFO] Removing #wrapround-ad-right from the DOM"),g.parentNode.removeChild(g)),m.fire(document.body,"wraparound.scale.reset")}function o(a){if(!a||!a.slots)return void h["default"].log('[ERROR] The data coming from the "wraparound.load" event is incorrect. Data:',a);if(f["default"].isMobileBreakpoint())return void h["default"].log("[ERROR] A wraparound ad format was being loaded for a mobile breakpoint. Wraparound not created");i(),a.slots.backgroundColor&&f["default"].isDesktopBreakpoint()&&k(a.slots.backgroundColor);var b=a.slots.left,d=a.slots.right,e=a.slots.top;e&&c({data:e,position:"top"}),b&&c({data:a.slots.left,position:"left"}),d&&c({data:a.slots.right,position:"right"})}function p(){var a=l["default"].nodeListToArray(document.querySelectorAll(".wraparound-body > .gpt"));a.forEach(function(a){q(a)})}function q(a){var b=a.querySelector("div"),c=b.offsetWidth,d=r(),e=void 0,g=window.getComputedStyle(a.parentElement,null);if(!(g.getPropertyValue("width")>=c)){var h="top left";f["default"].isDesktopBreakpoint()&&(h="top center"),c>d.availableWidth&&(e=d.availableWidth/c,b.style.transform="scale("+e+")",b.style.transformOrigin=h)}}function r(){var a=void 0;(f["default"].isTabletLandscapeBreakpoint()||f["default"].isTabletPortraitBreakpoint())&&(a=document.body.clientWidth-120),f["default"].isDesktopBreakpoint()&&(a=1e3);var b=u.breakpointGutters[l["default"].getBreakpoint()];return a-=2*b,{availableWidth:a,gutter:b}}function s(){var a=document.querySelector(".wraparound-body > main"),b=document.getElementById("wraparound-ad-left"),c=document.getElementById("wraparound-ad-right"),d=document.querySelector(".mod-video[data-autoplay][data-related]"),e=document.body.clientWidth,h=0,i=0;a.style.removeProperty("width"),f["default"].isDesktopBreakpoint()?(h=330+parseInt(b.getBoundingClientRect().left,10)||0,i=330+parseInt(document.body.clientWidth-c.getBoundingClientRect().right,10)||0,e=e-h-i):e-=120;var j=e/a.offsetWidth;j<1?(j=j<v?v:j,d?a.style.width=e+"px":a.style.transform="scale("+j+")",a.setAttribute("data-scale",j)):a.removeAttribute("data-scale"),g(j),m.fire(document.body,"wraparound.scale.complete")}function t(a){o(a),m.listen(window,"scroll.stop",b),m.listen(window,"scroll.stop",e),m.listen(window,"resize.stop",b),m.listen(window,"resize.stop",e),m.listen(window,"resize.stop",s),m.listen(window,"resize.stop",p),s()}var u={adsTopPositionToWindow:{breakpoints:{tabletPortraitUpwards:100,tabletLandscapeUpwards:103,desktop:113}},breakpointGutters:{tabletPortraitUpwards:16,tabletLandscapeUpwards:16,desktop:32,widescreen:32,"widescreen-extra":32},lockAdsScrollPosition:{breakpoints:{tabletPortraitUpwards:100,tabletLandscapeUpwards:70,desktop:80}},topFrame:{additionalSpacing:{tabletPortraitUpwards:16,tabletLandscapeUpwards:16,desktop:32},adFrameNativeWidth:1e3,isRichMedia:!1}},v=.7;return{createTakeoverFrame:c,init:t,lockUnlockSideFrames:b,reset:n,resizeFrameDomElement:d,setWraparoundClassname:i}}();c["default"]=n},{"../../scriptsCore/js/adUtilities":24,"../../scriptsCore/js/configUtilities":27,"@trinitymirrordigital/chameleon-core":3,"@trinitymirrordigital/chameleon-utilities":7}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("@trinitymirrordigital/chameleon-core"),f=d(e),g=a("../../scriptsCore/js/configUtilities"),h=d(g),i=f["default"].events,j=function(){function a(){i.listen(window,"gigya.user.islogedin",f)}function b(a){return a.match(/^[a-z]{1,2}/i)[0]}function c(a){var b=a.length;return a.substring(0,b-3).replace(/\s/g,"")}function d(a,b){var c=b*Math.floor(Math.abs(a/b)),d=c+(b-1);return c+"-"+d}function e(a){var e={};return e.age=a.age,e.ageOfFive=d(a.age,5),e.ageOfTen=d(a.age,10),e.birthMonth=a.birthMonth,e.gender=a.gender,e.city=a.city,e.country=a.country,e.zip=c(a.zip),e.zipArea=b(a.zip),e}function f(a){h["default"].log("[INFO] Sending user data to Lotame",a);var b=e(a.data.user.profile);i.fire(window,"tm.commercial.lotameData",b)}function g(){a()}return{init:g}}();c["default"]=j},{"../../scriptsCore/js/configUtilities":27,"@trinitymirrordigital/chameleon-core":3}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../scriptsCore/js/configUtilities"),f=d(e),g=a("@trinitymirrordigital/chameleon-core"),h=d(g),i=a("../../scriptsCore/js/dataLayerUtilities"),j=d(i),k=a("../../scriptsCore/js/eventPromise"),l=d(k),m=h["default"].events,n=function(){function a(a){f["default"].log("[INFO] Switch delivery callback:",a),m.fire(document.body,"switch.delivery."+a)}function b(a,b){f["default"].log("[INFO] Switch ad render callback:",a,b),j["default"].setInfo("components.gpt.switchData."+a,b)}function c(c,d){return window.__switch_zero=window.__switch_zero||{},window.__switch_zero.units=window.__switch_zero.units||[],f["default"].log("[INFO] Defining switch header bidding unit:",c,d),window.__switch_zero.units.push({dfpDivId:c,switchAdUnitId:d,deliveryCallback:a,renderCallback:b}),{name:"switch.delivery."+c}}function d(a){var b=[];return f["default"].log("[INFO] Defining switch header bidding units"),a.map(function(a){return f["default"].getConfig(a)}).filter(function(a){return a.switchAdUnitId}).forEach(function(a){f["default"].log("[INFO] Defining switch header bidding units"),b.push(c(a.name,a.switchAdUnitId))}),b}function e(a){f["default"].log("[INFO] Setting switch auction timeout to ",a),window.__switch_zero.commands.push(function(){window.__switch_zero.setTimeoutMs(a)})}function g(){f["default"].log("[INFO] Starting switch header bidding auction"),window.__switch_zero.triggerAuctionsFromClient()}function h(a,b){return a&&a.length>0?(window.__switch_zero=window.__switch_zero||{},window.__switch_zero.commands=window.__switch_zero.commands||[],f["default"].log("[INFO] Configuring switch header bidding auction"),window.__switch_zero.commands.push(function(){window.__switch_zero.setAdserverDomain("delivery.h.switchadhub.com")}),b&&e(b),d(a)):[]}function i(){window.__switch_zero=window.__switch_zero||{},window.__switch_zero.commands=window.__switch_zero.commands||[],window.__switch_zero.commands.push(g)}function k(a){f["default"].log("[INFO] Initialising switch header bidding auction - time: ",j["default"].getPerformanceTime());var b=Number(f["default"].getPublicSectionParam("switch.header.timeout")),c=[];return f["default"].getPublicSectionParam("switch.header.enabled")&&(c=h(a,b||1e3)),c.length>0?(i(),j["default"].setInfo("headerBidding.status","started"),f["default"].log("[INFO] Header bidding auction running - time: ",j["default"].getPerformanceTime()),l["default"].multiEventsPromise(c,document.body,b)):(j["default"].setInfo("headerBidding.status","not configured"),f["default"].log("[INFO] Header bidding auction NOT running - time: ",j["default"].getPerformanceTime()),!1)}return{defineUnitForAuction:c,defineUnitsForAuction:d,setAuctionTimeout:e,startAuction:g,configureAuction:h,runAuction:i,init:k}}();c["default"]=n},{"../../scriptsCore/js/configUtilities":27,"../../scriptsCore/js/dataLayerUtilities":28,"../../scriptsCore/js/eventPromise":29,"@trinitymirrordigital/chameleon-core":3}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("../../scriptsCore/js/injection"),f=d(e),g=a("@trinitymirrordigital/chameleon-core"),h=d(g),i=h["default"].events,j=function(){function a(){f["default"].injectOrRepositionAtCurrentBreakpointByType("partner")}function b(){i.listen(document.body,"reinjection.complete.gpt",a)}return{init:b}}();b.exports=j},{"../../scriptsCore/js/injection":30,"@trinitymirrordigital/chameleon-core":3}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("@trinitymirrordigital/chameleon-utilities"),f=d(e),g=a("./configUtilities"),h=d(g),i=a("./pageUtilities"),j=d(i),k=a("nested-property"),l=d(k),m=function(){function a(a){var b=[];(a.templ||"").indexOf("index")>-1?a.subarea&&(b=[a.subarea]):a.storymeta&&(b=a.storymeta.replace(/-/g,"_").split(","));for(var c=0;c<b.length;c++)if(t.hasOwnProperty(b[c])){a.subarea=b[c],a.area=t[b[c]],a.useTMAdUnitFormat!==!0&&(a.adUnitId="/5293/"+a.lwsite+"/"+a.lwsite+"_"+a.lwsite.slice(-4)+a.area+"_"+a.subarea);break}return delete a.useTMAdUnitFormat,a}function b(){var b=f["default"].getBreakpoint(),d=h["default"].getElementsForBreakpoint("page")||{},e=j["default"].getQueryParameter("adSite"),g=j["default"].getUHID();return d.platform=s.common[b].platform||d.platform,d.breakpoint=b,d.loggedin="n",d.donottrack="n",d.type="firstlook",d.origin="",d.token=c(),d.site=e?e:"chameleon",window.gs_channels&&(d.gs_cat=window.gs_channels),d.templ=l["default"].get(s,d.templ+"."+b+".templ")||d.templ,g&&(h["default"].log("Setting uhid targetting parameter"),d.uhid=g),d.inskin_yes=screen.width>=1500?"true":"false",d.lwsite&&(d.oid&&(d.article=d.oid),(d.templ||"").indexOf("gallery")>-1&&(d.pid=d.oid),d.RU=j["default"].getReferrerDomain(),a(d)),d.adUniturl=d.adUnitId,d}function c(){var a=j["default"].getQueryParameter("token");return a?a:""}function d(a){return a instanceof Array&&2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]}function e(a,b){var c=a.sizes instanceof Array?a.sizes[0]:[],e=b.sizes instanceof Array?b.sizes[0]:[];if(d(c)){if(d(e)){for(var f=0;f<=1;f++)if(c[f]!==e[f])return c[f]<e[f]?-1:1;return 0}return-1}return d(e)?1:0}function g(a,b){var c=a.targetting||{},d=b.targetting||{};return c.hivis!==d.hivis?"y"===c.hivis?-1:1:0}function i(a,b){var c=a.targetting||{},d=b.targetting||{};return c.index!==d.index?c.index?d.index?"auto"===c.index?1:"auto"===d.index?-1:c.index<d.index?-1:1:-1:1:0}function k(a,b){return a.isOOP!==b.isOOP?a.isOOP?"number"==typeof a.comparatorValue?a.comparatorValue:-1:"number"==typeof b.comparatorValue?b.comparatorValue*-1:1:0}function m(a,b){var c=h["default"].getConfig(a),d=h["default"].getConfig(b);return k(c,d)||e(c,d)||g(c,d)||i(c,d)}function n(){return"desktop"===f["default"].getBreakpoint()}function o(){return"tabletPortraitUpwards"===f["default"].getBreakpoint()}function p(){return"tabletPortraitUpwards"===f["default"].getBreakpoint()}function q(){return"baseLayout"===f["default"].getBreakpoint()}function r(a){var b=JSON.parse(a.getAttribute("data-config"));return b.enabled!==!1}var s={common:{baseLayout:{platform:"web,responsive"},tabletPortraitUpwards:{platform:"web,desktop"},tabletLandscapeUpwards:{platform:"web,desktop"},desktop:{platform:"web,desktop"}},article:{baseLayout:{templ:"article,responsive-article"},tabletPortraitUpwards:{templ:"article,responsive-article"},tabletLandscapeUpwards:{templ:"article"},desktop:{templ:"article"}},index:{baseLayout:{templ:"index,responsive-index"},tabletPortraitUpwards:{templ:"index,responsive-index"},tabletLandscapeUpwards:{templ:"index"},desktop:{templ:"index"}},home:{baseLayout:{templ:"home,responsive-index"},tabletPortraitUpwards:{templ:"home,responsive-index"},tabletLandscapeUpwards:{templ:"home"},desktop:{templ:"home"}},"live-event":{baseLayout:{templ:"live-event,responsive-article"},tabletPortraitUpwards:{templ:"live-event,responsive-article"},tabletLandscapeUpwards:{templ:"live-event,article"},desktop:{templ:"live-event,article"}},gallery:{baseLayout:{templ:"gallery,responsive-gallery"},tabletPortraitUpwards:{templ:"gallery,responsive-gallery"},tabletLandscapeUpwards:{templ:"gallery"},desktop:{templ:"gallery"}}},t={education:"news",crime:"news",politics:"news",traffic_and_travel:"news",cambridge_city_fc:"sport",cambridge_united_fc:"sport",things_to_do:"entertainment_news"};return{getPageLevelData:b,getTokenString:c,cmpSlotOop:k,cmpSlotVis:g,cmpSlotIndex:i,cmpSlotSizes:e,slotOrderComparator:m,isDesktopBreakpoint:n,isTabletLandscapeBreakpoint:o,isTabletPortraitBreakpoint:p,isMobileBreakpoint:q,isPlaceholderEnabled:r}}();c["default"]=m},{"./configUtilities":27,"./pageUtilities":31,"@trinitymirrordigital/chameleon-utilities":7,"nested-property":14}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=window.TMCONFIG&&window.TMCONFIG.frontendRoot;a&&window.$script(a+"/@trinitymirrordigital/withnail/lib/ads/ads.js",function(){h.fire(window,"adblocker.detected",{adblockerDetector:"tm-adblock",adblockerEnabled:!document.getElementById("tm-adblock")})})}Object.defineProperty(c,"__esModule",{value:!0});var f=a("@trinitymirrordigital/chameleon-core"),g=d(f),h=g["default"].events;c["default"]=e},{"@trinitymirrordigital/chameleon-core":3}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=Math.floor(100*Math.random())<=b,d=new Date,e=30;return document.cookie=a+"="+c+"; expires="+d.setDate(d.getDate()+e)+"; max-age="+24*e*60*60+"; path=/",c}function f(){var a=void 0,b=void 0,c=3e3,d=500,f=50,g=void 0;try{a=new window.URLSearchParams(window.location.search).get("commercialTest"),c=Number(new window.URLSearchParams(window.location.search).get("commercialTestTimeout"))||c,d=Number(new window.URLSearchParams(window.location.search).get("commercialTestLazyloadOffset"))||d,a&&(b=!0)}catch(i){}if(!a)try{a=window.TMCONFIG.publicSectionParams["commercial.test.id"],c=Number(window.TMCONFIG.publicSectionParams["commercial.test.timeout"])||c,d=Number(window.TMCONFIG.publicSectionParams["commercial.test.lazyloadOffset"])||d,f=Number(window.TMCONFIG.publicSectionParams["commercial.test.segmentationThreshold"])||f}catch(i){}if(a)return g=a+"-"+c+"-"+d,b||(b=j["default"].getCookie(g),b="true"===b||"false"===b?"true"===b:e(g,f)),h["default"].setInfo("commercialTest",g+"-"+b),{id:a,value:b,timeout:c,lazyloadOffset:d,segmentationThreshold:f}}Object.defineProperty(c,"__esModule",{value:!0});var g=a("./dataLayerUtilities"),h=d(g),i=a("@trinitymirrordigital/chameleon-utilities"),j=d(i);c["default"]=f},{"./dataLayerUtilities":28,"@trinitymirrordigital/chameleon-utilities":7}],27:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("@trinitymirrordigital/chameleon-utilities"),f=d(e),g=a("./pageUtilities"),h=d(g),i=function(){function a(a){var b=h["default"].getQueryParameter(a)||(window.TMCONFIG||{})[a];return i.log("[INFO] Getting TM Config parameter "+a,b),b}function b(b){var c=h["default"].getQueryParameter("publicSectionParams."+b)||(a("publicSectionParams")||{})[b];return i.log("[INFO] Getting TM public section parameter "+b,c),c}function c(a){var b=document.getElementById(a);return b?JSON.parse(b.getAttribute("content")):void j("[ERROR] The injection config element cannot be found on the page. [Func: getFullConfig]")}function d(a){var b=document.getElementById(a);if(!b)return void j("[INFO] The adjustments config element cannot be found on the page. [Func: getAdjustments]");try{return JSON.parse(b.getAttribute("content"))}catch(c){j("[ERROR] JSON parse of adjustments config failed: ."+c+" [Func: getAdjustments]")}}function e(a,b,c){var d=a[b];if(!c)return j("[ERROR] No adjustments found for ",d," [Func: processAdjustment]"),a;if(!d.allowAdjustments)return j("[ERROR] Adjustments not allowed for ",d," [Func: processAdjustment]"),a;if(c.remove){if(d.allowAdjustments.remove)return j("[INFO] Config item removed: ",d," [Func: processAdjustment]"),a.splice(b,1);j("[ERROR] Remove adjustment not allowed for ",d," [Func: processAdjustment]")}return a}function g(a,b){if(!b)return a;var c=void 0,d=void 0;return Object.keys(b).forEach(function(f){b[f].forEach(function(b){d=a[f],c=d.findIndex(function(a){return a.componentType===b.componentType&&a.name===b.name}),c>-1&&(d=e(d,c,b.adjustments))})}),a}function j(){window.location.href.indexOf("configDebug=on")>-1&&console.log.apply(console,arguments)}function k(){window.location.href.indexOf("configDebug=on")>-1&&console.err.apply(console,arguments)}function l(a){return JSON.parse(a.getAttribute("data-config"))}function m(a){var b=[],c=void 0;for(var d in u)u.hasOwnProperty(d)&&Array.isArray(u[d])&&(c=p(d,a),Array.prototype.push.apply(b,c));return b}function n(a){var b=void 0;return j("[INFO] Getting config elements for breakpoint",a),u&&u[a]?(b=u[a],j("[INFO] Got config elements",b),b):(j("[ERROR] The Breakpoint",a,"is not defined in config. [Func: getElementsForBreakpoint]"),[])}function o(){return n(f["default"].getBreakpoint())}function p(a,b){var c=void 0;if(!u||!u[a])return j("[ERROR] The breakpoint",a,"is not defined in the config. [Func: getElementsByTypeForBreakpoint]"),[];var d=n(a);return Array.isArray(d)?(j("[INFO] The slots for breakpoint are ",d),c=d.filter(function(a){return a.componentType===b})||[],j("[INFO] The filtered slots for type"+b+" are ",d),c):(j("[ERROR] The slots supplied are not an Array. [Func: getElementsByTypeForBreakpoint]"),[])}function q(a){return p(f["default"].getBreakpoint(),a)}function r(){if(v)return v;var a=document.getElementById("scriptConfig");if(!a)return void j("[WARN] The script config element cannot be found on the page. [Func: getScriptConfig]");try{return JSON.parse(a.getAttribute("content"))}catch(b){j("[ERROR] Error returning script config: "+b)}}function s(a){var b=void 0,c=a.match(/^\/(.*?)\/([gim]*)$/);return b=c?new RegExp(c[1],c[2]):new RegExp(a)}function t(a){u=c(a),u=g(u,d(a+"-adjustments")),v=r(v)}var u=void 0,v=void 0;return t("advertisingConfig"),{getAllElementsByType:m,getConfig:l,getElementsByTypeForBreakpoint:p,getElementsByTypeForCurrentBreakpoint:q,getElementsForBreakpoint:n,getElementsForCurrentBreakpoint:o,getFullConfig:c,getPublicSectionParam:b,getTmConfigParam:a,init:t,log:j,err:k,adjustConfig:g,getScriptConfig:r,stringToRegex:s}}();c["default"]=i},{"./pageUtilities":31,"@trinitymirrordigital/chameleon-utilities":7}],28:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("@trinitymirrordigital/chameleon-core"),f=d(e),g=a("./configUtilities"),h=d(g),i=a("nested-property"),j=d(i),k=f["default"].events,l=function(){function a(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function b(){return window.performance?window.performance.now():Date.now()}function c(){var a=window.performance.timing;return{dns:a.domainLookupEnd-a.domainLookupStart,request:a.responseStart-a.requestStart,response:a.responseEnd-a.responseStart,tcp:a.connectEnd-a.connectStart}}function d(a,b,c){return Math.round(((a||0)*c+b)/(c+1))}function e(a,b,c,e,f){var g=window.commercialData.performanceReport.consolidated,h=b,i=b,j=1,k=b,l=c,m=c,n=0,o=c,p=e,q=window.performance&&c>0,r=e;if(g[a]){var s=g[a].data;r=s.viewable,k=s.totalConnectTime,j=s.numberOfComponents+1,i=s.maxConnectTime,n=s.numberOfComponents,i=Math.max(i,b),k+=b,h=k/j,p=n*r+e,r=p/j,g[a]&&q&&(o=s.totalEndTime,m=s.maxEndTime,m=Math.max(m,c),o+=c,l=o/j)}else g[a]={data:{}};g[a].data.connectTime=h,g[a].data.totalConnectTime=k,g[a].data.maxConnectTime=i,g[a].data.numberOfComponents=j,g[a].data.viewable=r,Object.keys(f).forEach(function(b){b.indexOf("To")!==-1&&(g[a].data[b]=d(g[a].data[b],f[b],n))}),q&&(g[a].data.averageEndTime=l,g[a].data.maxEndTime=m,g[a].data.totalEndTime=o)}function f(a,b){var c=window.commercialData.performanceReport.consolidated,d=b,e=void 0,f=void 0;c[a]&&(d=c[a].data.viewable,e=c[a].data.numberOfComponents,f=e*d+b,d=f/e),c[a].data.viewable=d}function g(b){var c=b.dataset,d=c.type,f=parseInt(c.responseStart),g=parseInt(c.responseEnd),h=parseInt(c.requested),i=void 0,j=a(b.id),k=parseInt((g-f).toFixed(2)),l=c.viewable?1:0,n=Math.round(h-f),o=Math.round(g-h);return i={connectTime:k,responseEnd:g,responseStart:f,viewable:l,startToInjected:f,startToRequested:h,injectedToRequested:n,injectedToReceived:k,requestedToReceived:o,startToReceived:g},Object.keys(c).forEach(function(a){if("timer"===a.substr(0,5)){var b=parseInt(c[a]);i["startTo"+a.substr(5)]=b,i["requestedTo"+a.substr(5)]=Math.round(b-h),i[a.substr(5,1).toLowerCase()+a.substr(6)+"ToReceived"]=Math.round(g-b)}}),window.commercialData.performanceReport.components[j]={data:i},e(d,k,window.performance?g:0,l,i),m(),window.commercialData}function i(a){var b=a.dataset.viewable?1:0;l(a.id,"viewable",b),f(a.dataset.type,b)}function l(b,c,d){var e=a(b);return window.commercialData.performanceReport.components[e].data[c]=d,m(),window.commercialData}function m(){var a={commercialData:window.commercialData};window.TMDATA?window.TMDATA.update(a):k.listen(document.body,"dataLayer.ready",function(b){b.data.update(a)})}function n(a,c,d){var e=d?d:b();return a?(a.setAttribute("data-response-start",e),void a.setAttribute("data-type",c)):void h["default"].log("[ERROR] The element to set timing was not found on the page.")}function o(a,c){return a.setAttribute("data-timer-"+c,b()),a}function p(a){return a?(a.setAttribute("data-response-end",b()),void(y||g(a))):void h["default"].log("[ERROR] The element to set timing was not found on the page.")}function q(a){w("adblocker."+(a.data.adblockerDetector||"enabled"),a.data.adblockerEnabled)}function r(a){var b=void 0;return a=a||(window.TMDATA||{}).access,a&&"function"==typeof a&&(b=a("article.attributes.objectType")||a("page.attributes.pageType")),b}function s(a){var b=a.data.access;w("url",b("page.info.url")),w("page-type",r(b)),w("section",b("page.attributes.subSectionOne")),w("sub-section",b("page.attributes.subSectionTwo"))}function t(){k.listen(window,"breakpointchange",u),k.listen(window,"adblocker.detected",q),k.listen(document.body,"dataLayer.ready",s)}function u(){y=!0}function v(b,c,d){var e=b.dataset.type,f=window.commercialData.metrics,g=e+".data."+a(b.id)+"."+c,h=e+".data."+c,i=j["default"].get(f.components,g),k=j["default"].get(f.consolidated,h);i||(i=j["default"].set(f.components,g,0)),k||(k=j["default"].set(f.consolidated,h,0)),j["default"].set(f.components,g,i+d),j["default"].set(f.consolidated,h,k+d),m()}function w(b,c){j["default"].set(window.commercialData.info,a(b),c),m()}function x(){y=!1,window.commercialData=window.commercialData||{performanceReport:{consolidated:{},components:{}},metrics:{consolidated:{},components:{}},info:{}},t()}var y=!1;return x(),{finaliseElementTiming:p,getPageType:r,getPerformanceStats:c,getPerformanceTime:b,init:x,initialiseElementTiming:n,performanceTimeReport:g,toCamelCase:a,updateViewability:i,setCustomTimer:o,setMetric:v,setInfo:w}}();c["default"]=l},{"./configUtilities":27,"@trinitymirrordigital/chameleon-core":3,"nested-property":14}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./configUtilities"),f=d(e),g=a("@trinitymirrordigital/chameleon-core"),h=d(g),i=a("@trinitymirrordigital/chameleon-utilities"),j=d(i),k=h["default"].events,l=function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},m=function(){function a(a){if(a.isResolved)return a;var b=!0,c=!1,d=!1,e=a.then(function(a){return d=!0,b=!1,a},function(a){throw c=!0,b=!1,a});return e.isFulfilled=function(){return d},e.isPending=function(){return b},e.isRejected=function(){return c},e}function b(b,c){return f["default"].log("[INFO] Converting event to promise",b.name,c),b.resolution="pending",b.promise=a(new j["default"].promise(function(a,d){b.resolve=a,b.reject=d,k.listen(c,b.name,function e(d){c.removeEventListener(b.name,e),b.eventObj=d,f["default"].log("[INFO] Resolving event promise",b.name),b.resolution="resolved","function"==typeof b.triggerFunction&&(f["default"].log("[INFO] Running event triggerFunction for "+b.name),b.triggerFunction(b)),"function"==typeof((b.eventObj||{}).data||{}).triggerFunction&&(f["default"].log("[INFO] Running event object triggerFunction for "+b.name),b.eventObj.data.triggerFunction(b)),a(b)})})),b.promise}function c(a,b){if("string"==typeof a){if("window"===a)return window;if("body"===a)return document.body;var c=document.querySelector(a);return c?c:b}return b}function d(d,g,h){var i=d.map(function(a){return b(a,a.emitter?c(a.emitter,g):g)}),k=d.map(function(a){return l(a.timeout)?a.timeout:0}),m=void 0;l(h)&&h>0&&k.push(h);var n=Math.max.apply(Math,k);return 1===i.length?(f["default"].log("[INFO] Created single promise for event",d),m=i[0]):(f["default"].log("[INFO] Creating wrapper promise for multiple events",d),m=a(j["default"].promise.all(i))),n>0&&(f["default"].log("[INFO] Creating timeout wrapper promise for events",d),m=e(n,m,d)),m}var e=function(b,c,d){var e="[INFO] Timed out promise for events: "+d.map(function(a){return a.name}).join(",")+" in "+b+"ms.",g=a(new j["default"].promise(function(a,c){var g=setTimeout(function(){clearTimeout(g),f["default"].log(e),d&&d.filter(function(a){return"resolved"!==a.resolution}).forEach(function(a){a.resolution="timeout"}),c(e)},b)}));return a(j["default"].promise.race([c,g]))};return{makeQueryablePromise:a,eventToPromise:b,multiEventsPromise:d}}();c["default"]=m},{"./configUtilities":27,"@trinitymirrordigital/chameleon-core":3,"@trinitymirrordigital/chameleon-utilities":7}],30:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./dataLayerUtilities"),f=d(e),g=a("../../scriptsCore/js/configUtilities"),h=d(g),i=a("../../scriptsCore/js/adUtilities"),j=d(i),k=a("@trinitymirrordigital/chameleon-core"),l=d(k),m=l["default"].events,n=function(){function a(){var a=h["default"].getElementsForCurrentBreakpoint(),b=void 0;a&&(b=c(a),g(b))}function b(a){var b=h["default"].getElementsByTypeForCurrentBreakpoint(a),d=void 0;b&&(d=c(b),g(d))}function c(a){var b={},c=[],e=void 0;h["default"].log("[injectPlaceholders] filtering the ad slots configs that will not be injected",a);var f=a.filter(d);return h["default"].log("[injectPlaceholders] adSlots configs that will get injected into the page",f),f.forEach(function(a){c=[],a.referenceNode&&a.relativePos?c=k(a):a.referenceSlot&&a.relativePos?(a.referenceNode="#"+a.referenceSlot,c=k(a)):(e=document.getElementById(a.name),e&&e.setAttribute("data-config",JSON.stringify(a)),c.push(e)),0!==c.length&&(b[a.componentType]||(b[a.componentType]=[]),Array.prototype.push.apply(b[a.componentType],c))}),b}function d(a){return a.injectionEnabled!==!1}function e(a,b){var c="injection.complete."+a;h["default"].log("[injectionCompleteForType] Before filtering: ",b),b=b.filter(j["default"].isPlaceholderEnabled),h["default"].log("[injectionCompleteForType] After filtering: ",b);var d={placeholders:b};m.fire(document.body,c,d),h["default"].log("[INFO] Event",c,"fired. Placeholders:",b)}function g(a){var b=void 0;for(b in a)a.hasOwnProperty(b)&&e(b,a[b])}function i(a,b){var c=void 0;for(b=b.split(" "),c=0;c<b.length;c++)a.classList.add(b[c])}function k(a){var b=l(a.name,a.componentType,a);return o(b,a)}function l(a,b,c){var d=document.createElement("div");return d.id=a,d.classList.add(b),d.setAttribute("data-config",JSON.stringify(c)),d.setAttribute("data-"+b+"-placeholder",""),c.lazyLoad&&d.setAttribute("data-mod",b),c.hidden&&d.classList.add("hidden"),c.additionalClass&&i(d,c.additionalClass),f["default"].initialiseElementTiming(d,b),d}function n(a,b,c){var d=void 0,e=[];return b||c?(d=document.querySelectorAll(a),isNaN(c)||(d=d.item(c-1),d&&(e.push(d),d=e))):(d=document.querySelector(a),d&&(e.push(d),d=e)),d&&0!==d.length?d:(h["default"].log("[WARN] The reference node was not found on the page. referenceNode:",a),[])}function o(a,b){var c=void 0,d=void 0,e=[],f=void 0;if(c=n(b.referenceNode,b.repeat,b.referenceIndex),c&&0!==c.length||b.referenceNode2&&(h["default"].log("[INFO] finding fallback reference node for injection: "+b.referenceNode2),c=n(b.referenceNode2,b.repeat,b.referenceIndex2)),!c||0===c.length)return[];for(f=0;f<c.length;f++)c.length>1?(d=a.cloneNode(!0),d.id=d.id+"-"+f):d=a,e.push(p(c[f],d,b.relativePos));return e}function p(a,b,c){if(!a)return void h["default"].log("[ERROR] The referenceNode is not defined when trying to insert",b," [Func: insertElementOnPage]");var d=void 0;switch(c){case"after":d=q(a,b);break;case"before":d=r(a,b);break;case"appendChild":d=s(a,b);break;case"prependChild":d=t(a,b)}return h["default"].log("[INFO] The placeholder",d,"was injected",c,"the element",a),d}function q(a,b){return a.parentNode.insertBefore(b,a.nextSibling)}function r(a,b){return a.parentNode.insertBefore(b,a)}function s(a,b){return a?a.appendChild(b):void h["default"].log("referenceNode is not defined on appendChildElement for "+b)}function t(a,b){if(!a)return void h["default"].log("referenceNode is not defined on prependChildElement for "+b);var c=a.firstChild||null;return a.insertBefore(b,c)}function u(a){var b=h["default"].getElementsByTypeForCurrentBreakpoint(a),d=[];if(b.forEach(function(a){var b=document.querySelector("#"+a.name);if(b){a.referenceSlot&&(a.referenceNode="#"+a.referenceSlot);var c=document.querySelector(a.referenceNode),e=JSON.parse(b.getAttribute("data-config"));c?a.referenceNode!==e.referenceNode&&(b.setAttribute("data-config",JSON.stringify(a)),p(c,b,a.relativePos)):b.parentElement.removeChild(b)}else d.push(a)}),d.length){var e=c(d);g(e)}}function v(){a()}return{appendChildElement:s,createPlaceholder:l,injectPlaceholders:c,init:v,injectAtCurrentBreakpointForType:b,injectionComplete:g,injectionCompleteForType:e,injectSlot:k,insertAdditionalClass:i,insertAfterElem:q,insertBeforeElem:r,insertPlaceholder:o,insertElementOnPage:p,prependChildElement:t,injectOrRepositionAtCurrentBreakpointByType:u}}();c["default"]=n},{"../../scriptsCore/js/adUtilities":24,"../../scriptsCore/js/configUtilities":27,"./dataLayerUtilities":28,"@trinitymirrordigital/chameleon-core":3}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./configUtilities.js"),f=d(e),g=function(){function a(){var a=window.TMDATA.access("page.info.uhid");return a?f["default"].log("Got uhid from Data Layer"):f["default"].err("uhid not present in Data Layer"),a}function b(){return window.location.search}function c(a,c){var d=c?c.substring(c.indexOf("?")):b(),e=new RegExp("[?&]"+a+"=([^&]*)").exec(d);return e&&decodeURIComponent(e[1].replace(/\+/g," "))}function d(){var a="";if(document.referrer){var b=document.createElement("a");b.href=document.referrer,a=b.hostname}return a}return{getUHID:a,getQueryParameter:c,getReferrerDomain:d}}();c["default"]=g},{"./configUtilities.js":27}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=((window.TMCONFIG||{}).publicSectionParams||{})[a]||[];if(y["default"].log("Getting EventsData for "+a,b),b&&"string"==typeof b)try{b=JSON.parse(b)}catch(c){y["default"].log("Error parsing "+a,c),b=[]}return b}function f(a){return e(a).filter(function(a){return!a.urlPathMatcher||y["default"].stringToRegex(a.urlPathMatcher).test(window.location.pathname)}).filter(function(a){return!a.pageTypeMatcher||y["default"].stringToRegex(a.pageTypeMatcher).test(s["default"].getPageType())})}function g(a){var b=f(a),c=void 0;return b&&b.length>0&&(c=I["default"].multiEventsPromise(b,document.body,100)),c}function h(){O=g("injectionDependencies"),P=g("adDependencies"),O?(y["default"].log("Deferring injection until events complete"),O.then(function(a){
y["default"].log("Injection: Resolved dependency promises",a),u["default"].init()})["catch"](function(a){y["default"].log("Injection: Rejected (timed out) dependency promises",a),u["default"].init()})):(y["default"].log("Not deferring injection - running immediately"),u["default"].init())}function i(a){P?(y["default"].log("Deferring GPT load until events complete"),P.then(function(b){y["default"].log("GPT: Resolved dependency promises",b),w["default"].init(a)})["catch"](function(b){y["default"].log("GPT: Rejected (timed out) dependency promises",b),w["default"].init(a)})):(y["default"].log("Not deferring GPT load - running immediately"),w["default"].init(a))}function j(){i(M),N=!0,document.cookie="__enableGS=true; path=/"}function k(){document.body.removeEventListener("injection.complete.gpt",k),j()}function l(a){document.body.removeEventListener("injection.complete.taboola",l),A["default"].init(a.data.placeholders)}function m(){C["default"].init(),E["default"].init()}function n(a){Object.keys(a.data).forEach(function(b){s["default"].setInfo("googleSurvey."+b,a.data[b])})}function o(){(0,K["default"])(),h(),m()}Object.defineProperty(c,"__esModule",{value:!0}),c.registerGoogleSurvey=void 0;var p=a("@trinitymirrordigital/chameleon-core"),q=d(p),r=a("../../scriptsCore/js/dataLayerUtilities"),s=d(r),t=a("./injection"),u=d(t),v=a("../../TMAd/js/TMAd"),w=d(v),x=a("../../scriptsCore/js/configUtilities"),y=d(x),z=a("../../taboola/js/taboola"),A=d(z),B=a("../../data/js/lotame"),C=d(B),D=a("../../partner/js/partnerInjection"),E=d(D),F=a("./commercialTests"),G=d(F),H=a("./eventPromise"),I=d(H),J=a("./adblocker"),K=d(J),L=q["default"].events,M=(0,G["default"])(),N=!1,O=void 0,P=void 0;L.listen(document.body,"injection.complete.gpt",k),L.listen(document.body,"injection.complete.taboola",l),L.listen(window,"googleSurvey.init",n),(window.TMDATA||{}).access?o():L.listen(document.body,"dataLayer.ready",function(){o()}),c.registerGoogleSurvey=n},{"../../TMAd/js/TMAd":16,"../../data/js/lotame":21,"../../partner/js/partnerInjection":23,"../../scriptsCore/js/configUtilities":27,"../../scriptsCore/js/dataLayerUtilities":28,"../../taboola/js/taboola":34,"./adblocker":25,"./commercialTests":26,"./eventPromise":29,"./injection":30,"@trinitymirrordigital/chameleon-core":3}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../scriptsCore/js/configUtilities"),f=d(e),g=a("../../scriptsCore/js/dataLayerUtilities"),h=d(g);window._taboola=window._taboola||[];var i=function(){function a(a){f["default"].log("Pushing to taboola",a),window._taboola.push(a)}function b(){a({listenTo:"render",handler:function(a){var b=a&&a.detail,c=b&&b.container,d=c.parentNode,e=d.classList.contains("tm-commercial-integrations-taboola");f["default"].log("[INFO] Received render event from Taboola",b),e&&(d.classList.add(i),h["default"].finaliseElementTiming(d))}})}function c(c,d,e,g,h){var i,j,k;return d.classList.add("recommended-stories"),d.classList.add("tm-commercial-integrations-taboola"),k=document.createElement("h3"),k.classList.add("box-heading"),k.innerHTML="Promoted Stories",d.appendChild(k),i=document.createElement("div"),i.setAttribute("id",c),i.classList.add("taboola"),d.appendChild(i),b(),j={container:c,mode:e,placement:g,target_type:h},a(j),f["default"].log("[INFO] Pushing to Taboola",j),d}function d(b,c,d,e,g,h){var i;return c.classList.add(b),c.classList.add("tm-commercial-integrations-taboolax"),c.setAttribute("id",b+h),i={container:b+h,mode:d,placement:e,target_type:g},f["default"].log("[INFO] Pushing to Taboola X",i),a(i),c}function e(a,b){var c,d=document.getElementById(a+b),e=setInterval(function(){try{c=d.querySelector("div"),c&&(f["default"].log("[INFO] Taboola-X has been rendered.",c),d.classList.add(i),h["default"].finaliseElementTiming(d),clearInterval(e))}catch(a){f["default"].log("[INFO] Iframe from Taboola not ready")}},600);setTimeout(function(){clearInterval(e)},15e3)}function g(a){return JSON.parse(a.getAttribute("data-config"))||{}}var i="populated";return{displayTaboolaX:e,getConfigFromElement:g,initSlot:c,initXSlot:d,push:a}}();c["default"]=i},{"../../scriptsCore/js/configUtilities":27,"../../scriptsCore/js/dataLayerUtilities":28}],34:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./core"),f=d(e),g=function(){function a(a){return e.filter(function(b){var c=f["default"].getConfigFromElement(b);return c.slotType===a})}function b(){var b,c,d=a("taboola");for(b=0;b<d.length;b++){c=f["default"].getConfigFromElement(d[b]);var e=window.TMCONFIG;"undefined"!=typeof e&&"live-event"===e.pageInfo.articleType?f["default"].push({category:"auto"}):f["default"].push({article:"auto"}),f["default"].initSlot(c.selector,d[b],c.mode,c.placement,c.targetType),f["default"].push({flush:!0})}}function c(){var b,c,d=a("taboola-x");for(b=0;b<d.length;b++)c=f["default"].getConfigFromElement(d[b]),f["default"].initXSlot(c.selector,d[b],c.mode,c.placement,c.targetType,b),f["default"].displayTaboolaX(c.selector,b)}function d(a){e=a,window.$script("http://cdn.taboola.com/libtrc/tmg-network/loader.js"),c(),b()}var e;return{filterByType:a,init:d}}();c["default"]=g},{"./core":33}],35:[function(a,b,c){"use strict";function d(a){var b,c="",d=a||{};return function(a){c=c+'<div class="sponsorship-bar"><a'+(pug.attr("href",a.clicktrack+a.url,!0,!1)+' target="_blank"')+'><div class="inner"><h4 class="sponsor-name">IN ASSOCIATION WITH<strong>'+pug.escape(null==(b=a.brand)?"":b)+"</strong></h4><p>"+pug.escape(null==(b=a.text)?"":b)+"</p></div><figure><img"+(pug.attr("src",a.image.src,!0,!1)+pug.attr("altText",a.image.alt,!0,!1))+"/></figure></a></div>"}.call(this,"partner"in d?d.partner:"undefined"!=typeof partner?partner:void 0),c}try{b.exports=d}catch(e){}},{}]},{},[32]);
//# sourceMappingURL=withnail.min.js.map